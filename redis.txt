session 的问题

目前 session 直接是js变量， 放在nodejs 进程中
第一 进程内存有限，访问量过大，内存爆增该怎么办？
第二 正式线上运行是多进程，进程之间内存无法共享
如果后端服务是多机器，集群，分布式的那种就更无法共享 session 数据了


解决方案 redis
web server 最常用的缓存数据库，数据存放在内存中
相比于 mysql , 访问速度快（内存和硬盘不是一个数量级的）

但是成本更高，可存储的数据量更小（内存的硬伤）

将 web server 和 redis 拆分为俩个单独的服务
双方都是独立的，都是可扩展的（例如都扩展成集群）
包括 mysql 也是一个单独的服务，也可以扩展

将 session 放进 redis 中存储就可以解决上面的问题

为何 session 适合用于 redis

session 访问频繁，对性能要求极高
session 可不考虑断电丢失数据的问题（内存的硬伤） （也可以做到断电不丢失数据，但是要单独去做些配置比如数据的备份和还原恢复）
session 数据量不会太大（相比于 mysql 中存储的数据）

为何网站数据不适合用redis

操作频率不是太高（相比于 session 操作）
断电不能丢失，必须保留
数据量太大，内存成本太高